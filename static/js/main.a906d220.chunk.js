(this["webpackJsonpprediction-markets-ui"]=this["webpackJsonpprediction-markets-ui"]||[]).push([[0],{162:function(e,t,n){},163:function(e,t){},166:function(e,t){},189:function(e,t){},190:function(e,t){},228:function(e,t){},229:function(e,t){},242:function(e,t){},244:function(e,t){},259:function(e,t){},264:function(e,t,n){},288:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(36),s=n.n(a),i=(n(162),n(3)),o=n.n(i),u=n(8),l=n(12),d=(n(13),n(19));n(29);new Intl.NumberFormat(void 0,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});var f={};function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(e)||t,c=Object(r.useState)(e+"\n"+n),a=Object(l.a)(c,2),s=a[1];Object(r.useEffect)((function(){return f[e]||(f[e]=[]),f[e].push(s),function(){f[e]=f[e].filter((function(e){return e!==s})),0===f[e].length&&delete f[e]}}),[e]);var i=Object(r.useCallback)((function(t){n!==t&&(null===t?localStorage.removeItem(e):localStorage.setItem(e,t),f[e].forEach((function(n){return n(e+"\n"+t)})))}),[n,e]);return[n,i]}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=b(e,JSON.stringify(t)),c=Object(l.a)(n,2),a=c[0],s=c[1];return[Object(r.useMemo)((function(){return a&&JSON.parse(a)}),[a]),function(e){return s(JSON.stringify(e))}]}var h=n(20),j=n(18),m=n(16),v=n(9),O=n.n(v),x=new Date,y=new Map,g=function(){function e(t,n,r){var c=this;Object(m.a)(this,e),this.cacheKey=void 0,this.fn=void 0,this.timeoutId=void 0,this.listeners=void 0,this.errors=void 0,this.cacheNullValues=!0,this.refresh=Object(u.a)(o.a.mark((function e(){var t,n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.timeoutId&&(clearTimeout(c.timeoutId),c.timeoutId=null),!c.stopped){e.next=3;break}return e.abrupt("return");case 3:return t=!1,e.prev=4,e.next=7,c.fn();case 7:if(n=e.sent,c.cacheNullValues||null!==n){e.next=14;break}return console.log("Not caching null value for ".concat(c.cacheKey)),c.errors=0,e.abrupt("return",n);case 14:return y.set(c.cacheKey,n),c.errors=0,c.notifyListeners(),e.abrupt("return",n);case 18:e.next=25;break;case 20:e.prev=20,e.t0=e.catch(4),++c.errors,console.warn(e.t0),t=!0;case 25:return e.prev=25,c.timeoutId||c.stopped||(r=c.refreshInterval,t&&c.refreshIntervalOnError&&c.refreshIntervalOnError>0&&(r=c.refreshIntervalOnError),c.errors>0&&(r=Math.min(1e3*Math.pow(2,c.errors-1),6e4)),(a=+new Date-+x)<5e3&&(r+=5e3-a/2),"hidden"===document.visibilityState?r=6e4:document.hasFocus()||(r*=1.5),r*=.8+.4*Math.random(),c.timeoutId=setTimeout(c.refresh,r)),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,20,25,28]])}))),this.cacheKey=t,this.fn=n,this.timeoutId=null,this.listeners=new Set,this.errors=0,this.cacheNullValues=r}return Object(j.a)(e,[{key:"refreshInterval",get:function(){return Math.min.apply(Math,Object(h.a)(Object(h.a)(this.listeners).map((function(e){return e.refreshInterval}))))}},{key:"refreshIntervalOnError",get:function(){var e=Object(h.a)(this.listeners).map((function(e){return e.refreshIntervalOnError})).filter((function(e){return null!==e}));return 0===e.length?null:Math.min.apply(Math,Object(h.a)(e))}},{key:"stopped",get:function(){return 0===this.listeners.size}},{key:"addListener",value:function(e){var t=this.refreshInterval;this.listeners.add(e),this.refreshInterval<t&&this.refresh()}},{key:"removeListener",value:function(e){O()(this.listeners.delete(e)),this.stopped&&this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}},{key:"notifyListeners",value:function(){this.listeners.forEach((function(e){return e.callback()}))}}]),e}();new(function(){function e(){Object(m.a)(this,e),this.loops=new Map}return Object(j.a)(e,[{key:"addListener",value:function(e){this.loops.has(e.cacheKey)||this.loops.set(e.cacheKey,new g(e.cacheKey,e.fn,e.cacheNullValues)),this.loops.get(e.cacheKey).addListener(e)}},{key:"removeListener",value:function(e){var t=this.loops.get(e.cacheKey);t.removeListener(e),t.stopped&&(this.loops.delete(e.cacheKey),y.delete(e.cacheKey))}},{key:"refresh",value:function(e){this.loops.has(e)&&this.loops.get(e).refresh()}},{key:"refreshAll",value:function(){return Promise.all(Object(h.a)(this.loops.values()).map((function(e){return e.refresh()})))}}]),e}());n(150);var w=n(7),k=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com",custom:!1},{name:"devnet",endpoint:"https://devnet.solana.com",custom:!1},{name:"localnet",endpoint:"http://127.0.0.1:8899",custom:!1}],N=(new Map,c.a.createContext(null));function E(e){var t=e.children,n=p("connectionEndpts",k[0].endpoint),c=Object(l.a)(n,2),a=c[0],s=c[1],i=p("customConnectionEndpoints",[]),o=Object(l.a)(i,2),u=o[0],f=o[1],b=k.concat(u),h=Object(r.useMemo)((function(){return new d.b(a,"recent")}),[a]),j=Object(r.useMemo)((function(){return new d.b(a,"recent")}),[a]);return Object(r.useEffect)((function(){var e=h.onAccountChange((new d.a).publicKey,(function(){}));return function(){h.removeAccountChangeListener(e)}}),[h]),Object(r.useEffect)((function(){var e=h.onSlotChange((function(){return null}));return function(){h.removeSlotChangeListener(e)}}),[h]),Object(r.useEffect)((function(){var e=j.onAccountChange((new d.a).publicKey,(function(){}));return function(){j.removeAccountChangeListener(e)}}),[j]),Object(r.useEffect)((function(){var e=j.onSlotChange((function(){return null}));return function(){j.removeSlotChangeListener(e)}}),[j]),Object(w.jsx)(N.Provider,{value:{endpoint:a,setEndpoint:s,connection:h,sendConnection:j,availableEndpoints:b,setCustomEndpoints:f},children:t})}function S(){var e=Object(r.useContext)(N);if(!e)throw new Error("Missing connection context");return e.connection}function C(){var e=Object(r.useContext)(N);if(!e)throw new Error("Missing connection context");return{endpoint:e.endpoint,endpointInfo:e.availableEndpoints.find((function(t){return t.endpoint===e.endpoint})),setEndpoint:e.setEndpoint,availableEndpoints:e.availableEndpoints,setCustomEndpoints:e.setCustomEndpoints}}var M=n(151),K=n(82),I=n.n(K),A={background:"#0E1717",text:"#FFFFFF"};function L(e){var t=e.message,n=e.description,r=(e.txid,e.type),c=void 0===r?"custom":r;e.placement;K.notify.show(Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{children:t}),Object(w.jsx)("div",{children:n})]}),c,3e3,"custom"===c?A:null)}var T=n(31),_=n(32),F=n(38),P=n(51),D=n(53),V=n(50),W=n.n(V),B=new d.c("11111111111111111111111111111111"),U=function(e){Object(P.a)(n,e);var t=Object(D.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this))._publicKey=void 0,e._onProcess=void 0,e._connected=void 0,e._onProcess=!1,e._connected=!1,e.connect=e.connect.bind(Object(F.a)(e)),e}return Object(j.a)(n,[{key:"connected",get:function(){return this._connected}},{key:"autoApprove",get:function(){return!1}},{key:"signAllTransactions",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signAllTransactions(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_provider",get:function(){var e,t;if(null===(e=window)||void 0===e||null===(t=e.solana)||void 0===t?void 0:t.isMathWallet)return window.solana}},{key:"publicKey",get:function(){return this._publicKey||B}},{key:"signTransaction",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signTransaction(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=this;if(!this._onProcess){if(!this._provider)return window.open("https://mathwallet.org/","_blank"),void L({type:"error",message:"Math Wallet Error",description:"Please install mathwallet"});this._onProcess=!0,this._provider.getAccount().then((function(t){e._publicKey=new d.c(t),e._connected=!0,e.emit("connect",e._publicKey)})).catch((function(){e.disconnect()})).finally((function(){e._onProcess=!1}))}}},{key:"disconnect",value:function(){this._publicKey&&(this._publicKey=void 0,this._connected=!1,this.emit("disconnect"))}}]),n}(W.a),H="https://cdn.jsdelivr.net/gh/solana-labs/oyster@main/assets/wallets",Z=[{name:"sollet.io",url:"https://www.sollet.io",icon:"".concat(H,"/sollet.svg")},{name:"MathWallet",url:"https://www.mathwallet.org",icon:"".concat(H,"/mathwallet.svg"),adapter:U}],J=c.a.createContext(null);function R(e){var t,n,c=e.children,a=C().endpoint,s=Object(r.useState)(!1),i=Object(l.a)(s,2),o=i[0],u=i[1],d=p("walletProvider"),f=Object(l.a)(d,2),b=f[0],h=f[1],j=Object(r.useMemo)((function(){return Z.find((function(e){return e.url===b}))}),[b]),m=Object(r.useState)(void 0),v=Object(l.a)(m,2),O=v[0],x=v[1];Object(r.useEffect)((function(){if(j){var e=function(){O=new(j.adapter||M.a)(b,a),x(O)};if("complete"!==document.readyState){var t=function t(){e(),window.removeEventListener("load",t)};return window.addEventListener("load",t),function(){return window.removeEventListener("load",t)}}e()}}),[j,b,a]);var y=Object(r.useState)(!1),g=Object(l.a)(y,2),k=g[0],N=g[1];Object(r.useEffect)((function(){return O&&(O.on("connect",(function(){var e;if(null===(e=O)||void 0===e?void 0:e.publicKey){console.log("connected"),localStorage.removeItem("feeDiscountKey"),N(!0);var t=O.publicKey.toBase58();L({type:"success",message:"Wallet update",description:"Connected to wallet "+(t.length>20?"".concat(t.substring(0,7),".....").concat(t.substring(t.length-7,t.length)):t)})}})),O.on("disconnect",(function(){N(!1),L({type:"success",message:"Wallet update",description:"Disconnected from wallet"}),localStorage.removeItem("feeDiscountKey")}))),function(){N(!1),O&&O.connected&&(O.disconnect(),N(!1))}}),[O]),Object(r.useEffect)((function(){return O&&o&&(O.connect(),u(!1)),function(){}}),[O,o]);var E=Object(r.useState)(!1),S=Object(l.a)(E,2),K=S[0],I=S[1],A=Object(r.useCallback)((function(){return I(!0)}),[]),F=Object(r.useCallback)((function(){return I(!1)}),[]);return Object(w.jsxs)(J.Provider,{value:{wallet:O,connected:k,select:A,providerUrl:b,setProviderUrl:h,providerName:null!==(t=null===(n=Z.find((function(e){return e.url===b})))||void 0===n?void 0:n.name)&&void 0!==t?t:b},children:[c,Object(w.jsx)("div",{onClick:F,className:"flex justify-center items-center absolute top-0 left-0 w-full h-full bg-opposite bg-opacity-80 ".concat(K||"hidden"),children:Object(w.jsxs)("div",{className:"relative py-6 px-5 bg-depth-1 dark:bg-default shadow-xl rounded-xl max-w-sm w-full",children:[Object(w.jsx)("div",{className:"absolute top-2 right-3",children:Object(w.jsx)(T.a,{className:"cursor-pointer text-md",icon:_.e})}),Object(w.jsx)("h2",{className:"mb-5",children:"Choose a Provider"}),Z.map((function(e){return Object(w.jsxs)("div",{className:"p-2 rounded-md hover:bg-depth-2 flex items-center w-full cursor-pointer",onClick:function(){h(e.url),u(!0),F()},children:[Object(w.jsx)("img",{alt:"".concat(e.name),className:"mr-4",width:20,height:20,src:e.icon}),Object(w.jsx)("div",{children:e.name})]},e.name)}))]})})]})}function Q(){var e=Object(r.useContext)(J);if(!e)throw new Error("Missing wallet context");var t=e.wallet;return{connected:e.connected,wallet:t,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName,select:e.select,connect:function(){t?t.connect():e.select()},disconnect:function(){null===t||void 0===t||t.disconnect()}}}var z=function(e){return"dark"===localStorage.theme||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},q=Object(r.createContext)(),G=function(e){var t=e.initialTheme,n=e.children,c=Object(r.useState)(z),a=Object(l.a)(c,2),s=a[0],i=a[1],o=function(e){var t=window.document.documentElement,n="dark"===e;t.classList.remove(n?"light":"dark"),t.classList.add(e),localStorage.setItem("color-theme",e)};return t&&o(t),Object(r.useEffect)((function(e){o(s)}),[s]),Object(w.jsx)(q.Provider,{value:{theme:s,setTheme:i},children:n})},X=n(45);function Y(){var e,t=Object(r.useState)(0),n=Object(l.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(!1),i=Object(l.a)(s,2),o=i[0],u=i[1],d=Q(),f=d.connected,b=d.wallet,p=(d.select,d.connect),h=d.disconnect,j=(f&&(null===b||void 0===b||null===(e=b.publicKey)||void 0===e||e.toBase58()),S()),m=C(),v=(m.endpoint,m.endpointInfo);Object(r.useEffect)((function(){if(f){u(!0);var e=null===b||void 0===b?void 0:b.publicKey;j.getBalance(e).then((function(e){var t=Math.round(e/Math.pow(10,6))/1e3;a(t)})).finally((function(){return u(!1)}))}else a(0)}),[f]);return Object(w.jsxs)("div",{className:"flex items-center",children:[f&&Object(w.jsxs)("div",{className:"flex items-center",children:[o?Object(w.jsx)(T.a,{spin:!0,icon:_.d}):Object(w.jsxs)("div",{className:"flex items-center mx-2",children:[Object(w.jsx)("span",{children:c}),Object(w.jsx)("span",{className:"ml-1 text-primary font-bold",children:"SOL"})]}),Object(w.jsx)("div",{className:"mx-2 uppercase text-secondary font-bold",children:null===v||void 0===v?void 0:v.name})]}),Object(w.jsxs)("button",{className:"px-2 py-1 border border-primary rounded text-primary hover:border-opposite hover:text-default",onClick:f?h:p,children:[f?"Disconnect":"Connect",Object(w.jsx)(T.a,{className:"ml-2",icon:_.b})]})]})}var $=function(){return Object(w.jsx)("nav",{className:"flex bg-depth-1 justify-center",children:Object(w.jsxs)("div",{className:"h-12 container flex items-center justify-between w-full px-2",children:[Object(w.jsx)("div",{className:"font-bold text-md",children:Object(w.jsxs)(X.b,{to:"/",children:[" ",Object(w.jsx)("span",{className:"text-primary",children:"BET"}),"x "]})}),Object(w.jsx)("div",{children:Object(w.jsx)(Y,{})})]})})},ee=n(40),te=n(65),ne=function(e){var t=e.market,n=t.id,c=t.title,a=t.outcomes,s=Object(r.useState)(!0),i=Object(l.a)(s,2),f=i[0],b=i[1],p=Object(r.useState)(0),h=Object(l.a)(p,2),j=h[0],m=h[1],v=Object(r.useState)(null),O=Object(l.a)(v,2),x=(O[0],O[1]);return Object(r.useEffect)((function(){Object(u.a)(o.a.mark((function e(){var t,n,r,c,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new d.b("https://api.mainnet-beta.solana.com"),n=new d.c("HWHvQhFmJB3NUcu1aihKmrKegfVxBEHzwVX6yZCKEsi1"),r=new d.c("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),e.next=5,te.Market.load(t,n,{},r);case 5:return c=e.sent,x(c),e.next=9,c.loadBids(t);case 9:return e.sent,e.next=12,c.loadAsks(t);case 12:a=e.sent,s=a.getL2(1),m(s?s[0][0]:null),b(!1);case 16:case"end":return e.stop()}}),e)})))()}),[]),Object(w.jsx)(X.b,{to:"/market/".concat(n),children:Object(w.jsxs)("div",{className:"rounded bg-depth-1 p-2 shadow-sm hover:bg-depth-2 transition-color duration-100 ease-in",children:[Object(w.jsx)("div",{className:"font-bold text-md mb-4",children:c}),f?Object(w.jsx)("div",{className:"bg-depth-2 w-full h-8 rounded skeleton"}):Object(w.jsx)("div",{children:Object(w.jsxs)("div",{className:"flex items-center justify-between",children:[Object(w.jsx)("div",{children:a[0].name}),Object(w.jsxs)("div",{className:"bg-opacity-70 rounded bg-primary text-opposite font-bold px-2 py-1",children:[j," ",Object(w.jsx)("span",{className:"text-default",children:"SOL"})]})]})})]})})},re=function(e){var t=e.filters,n=e.handler,r=e.currentFilters,c=function(e,t){return"".concat(!r.includes(e)||"text-primary"," py-2 px-3 border-depth-2 hover:bg-depth-2 ").concat(t?"border-l":"")};return Object(w.jsx)("div",{className:"flex justify-center cursor-pointer bg-depth-1 rounded overflow-hidden",children:t.map((function(e,t){return Object(w.jsx)("div",{className:c(e,t),onClick:function(t){return function(e){n(e)}(e)},children:e},e)}))})},ce=(n(264),"ADD_MARKETS_AND_FILTERS"),ae="ADD_MARKET",se=n(155),ie=n.n(se),oe=function(){function e(){Object(m.a)(this,e)}return Object(j.a)(e,null,[{key:"marketDTOtoOutcomesArray",value:function(e){return[{name:e.outcome1Name.toUpperCase(),address:e.outcome1Address},{name:e.outcome2Name.toUpperCase(),address:e.outcome2Address}]}}]),e}(),ue=function(){function e(){Object(m.a)(this,e)}return Object(j.a)(e,null,[{key:"marketsDTOtoMarketsArray",value:function(e){var t=this;return e.map((function(e){return t.marketDTOtoMarket(e)}))}},{key:"marketDTOtoMarket",value:function(e){return{title:e.title,id:e.id,type:e.type,category:e.category,address:e.marketAddress,outcomes:oe.marketDTOtoOutcomesArray(e)}}}]),e}(),le=ie.a.create({baseURL:"https://api.sheety.co/e045915699c6339af73ba9c1a52fccd8/betx"}),de=function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n,r){var c,a,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,le.get("/markets/".concat(e));case 3:a=t.sent,s=a.data,c=ue.marketDTOtoMarket(s.market),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),c=null;case 11:n({type:ae,payload:c});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}()},fe=function(){var e=Object(ee.b)(),t=Object(r.useState)(!0),n=Object(l.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)([]),i=Object(l.a)(s,2),d=i[0],f=i[1],b=Object(ee.c)((function(e){return e.markets})),p=b.markets,j=b.filters;Object(r.useEffect)((function(){e(function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,c,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.get("/markets");case 3:a=e.sent,s=a.data,r=ue.marketsDTOtoMarketsArray(s.markets),c=r.map((function(e){return e.category})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r=[],c=[];case 13:t({type:ce,payload:{markets:r,filters:c.filter((function(e,t){return c.indexOf(e)===t}))}});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()).finally((function(){return a(!1)}))}),[]);var m;return c?Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"my-5 flex justify-center",children:Object(w.jsx)("div",{className:"w-60 bg-depth-1 h-10 rounded skeleton"})}),Object(w.jsx)("div",{className:"w-full flex items-center justify-center",children:Object(w.jsx)("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5",children:(m=5,Object(h.a)(Array(m)).map((function(e,t){return Object(w.jsx)("div",{className:"w-full bg-depth-1 h-24 rounded skeleton"},"skeleton".concat(t))})))})})]}):Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"my-5 flex justify-center",children:Object(w.jsx)(re,{filters:j,handler:function(e){d.includes(e)?f(d.filter((function(t){return t!==e}))):f([].concat(Object(h.a)(d),[e]))},currentFilters:d})}),Object(w.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5",children:p.filter((function(e){return!d.length||d.includes(e.category)})).map((function(e){return Object(w.jsx)("div",{className:"item-fadeIn",children:Object(w.jsx)(ne,{market:e})},e.id)}))})]})},be=n(21),pe=n(111),he=n(14),je=function(e){return"rgb(".concat(e,")")},me={colors:{primary:je("var(--color-primary)"),primary25:je("var(--color-primary-depth-1)")}},ve={control:function(e,t){return{borderRadius:15,cursor:"pointer",display:"flex","&:hover":{backgroundColor:je("var(--color-bg-depth-2)")}}},menu:function(e){return Object(he.a)(Object(he.a)({},e),{},{backgroundColor:je("var(--color-bg-depth-1)"),borderRadius:15,overflow:"hidden",padding:0})},option:function(e,t){return Object(he.a)(Object(he.a)({},e),{},{color:t.isSelected||t.isFocused?"black":je("var(--color-text-default)"),cursor:"pointer"})}},Oe=function(){var e=Object(u.a)(o.a.mark((function e(t,n,r){var c,a,s,i,u,f,b,p,h,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new d.b("https://api.mainnet-beta.solana.com"),a=new d.c("HWHvQhFmJB3NUcu1aihKmrKegfVxBEHzwVX6yZCKEsi1"),s=new d.c("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),e.next=5,te.Market.load(c,a,{},s);case 5:return i=e.sent,e.next=8,i.loadAsks(c);case 8:for(u=e.sent,f=u.getL2(1e9),console.log(f.map((function(e){var t=Object(l.a)(e,2);t[0];return t[1]})).reduce((function(e,t){return e+t}),0)),b=[],p=0;p<f.length&&r>0;)h=Object(l.a)(f[p],2),h[0],j=h[1],b.push(f[p]),r-=j,++p;return e.abrupt("return",b);case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function xe(e){var t=S(),n=Object(r.useState)(null),c=Object(l.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)([]),f=Object(l.a)(i,2),b=f[0],p=f[1],h=Object(r.useState)([]),j=Object(l.a)(h,2),m=j[0],v=j[1],O=Object(r.useState)(0),x=Object(l.a)(O,2),y=x[0],g=x[1],w=Object(r.useState)(0),k=Object(l.a)(w,2),N=k[0],E=k[1],C=function(){var e=Object(u.a)(o.a.mark((function e(){var n,r,c,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:1e10,e.next=3,null===a||void 0===a?void 0:a.loadAsks(t);case 3:if(e.t1=n=e.sent,e.t0=null===e.t1,e.t0){e.next=7;break}e.t0=void 0===n;case 7:if(!e.t0){e.next=11;break}e.t2=void 0,e.next=12;break;case 11:e.t2=n.getL2(r);case 12:return c=e.t2,e.abrupt("return",c||[]);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(o.a.mark((function e(){var n,r,c,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:1e10,e.next=3,null===a||void 0===a?void 0:a.loadBids(t);case 3:if(e.t1=n=e.sent,e.t0=null===e.t1,e.t0){e.next=7;break}e.t0=void 0===n;case 7:if(!e.t0){e.next=11;break}e.t2=void 0,e.next=12;break;case 11:e.t2=n.getL2(r);case 12:return c=e.t2,e.abrupt("return",c||[]);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("asks"!==t){e.next=10;break}return e.next=4,b;case 4:if(e.t1=e.sent,e.t1){e.next=7;break}e.t1=[];case 7:e.t0=e.t1,e.next=16;break;case 10:return e.next=12,m;case 12:if(e.t2=e.sent,e.t2){e.next=15;break}e.t2=[];case 15:e.t0=e.t2;case 16:return n=e.t0,e.abrupt("return",null===n||void 0===n?void 0:n.map((function(e){var t=Object(l.a)(e,2);t[0];return t[1]})).reduce((function(e,t){return e+t}),0));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){e&&function(){var n=Object(u.a)(o.a.mark((function n(){var r,c;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new d.c("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),n.next=3,te.Market.load(t,e,{},r);case 3:return c=n.sent,a||s(c),console.log(a),n.t0=p,n.next=10,C();case 10:return n.t1=n.sent,(0,n.t0)(n.t1),n.t2=v,n.next=15,M();case 15:return n.t3=n.sent,(0,n.t2)(n.t3),n.t4=E,n.next=20,K("asks");case 20:return n.t5=n.sent,(0,n.t4)(n.t5),n.t6=g,n.next=25,K("bids");case 25:n.t7=n.sent,(0,n.t6)(n.t7);case 27:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[a]),[a,b,m,y,N]}var ye=function(e){var t=e.serumMarkets,n=e.market,c=Object(r.useState)(null),a=Object(l.a)(c,2),s=a[0],i=a[1],d=Object(r.useState)(null),f=Object(l.a)(d,2),b=f[0],p=f[1],h=Q().connected,j=Object(r.useState)([]),m=Object(l.a)(j,2),v=m[0],O=m[1],x=xe(t[0]),y=Object(l.a)(x,5),g=y[0],k=(y[1],y[2],y[3],y[4]),N=xe(t[1]),E=Object(l.a)(N,5);E[0],E[1],E[2],E[3],E[4];Object(r.useEffect)((function(){n&&g&&O([{label:"SOL",value:g.baseMintAddress.toString()},{label:n.outcomes[0].name,value:g.quoteMintAddress.toString()},{label:n.outcomes[1].name,value:g.quoteMintAddress}])}),[n,g]);var S=function(e,t){t(e)},C=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(s,b,20);case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"w-full relative max-w-md",children:Object(w.jsxs)("div",{className:"relative w-full max-w-md p-4 shadow bg-depth-1 rounded-xl",children:[Object(w.jsx)("h1",{className:"px-4 text-center font-bold text-lg mb-4",children:n.title}),Object(w.jsxs)("div",{className:"rounded-2xl border border-depth-2 py-4 px-6 flex justify-between items-end",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"text-depth-1 uppercase text-sm mb-2",children:"swap"}),Object(w.jsx)("input",{autoComplete:"off",placeholder:"0.0",className:"no-arrows font-mono outline-none text-md bg-depth-1",id:"from",type:"number"})]}),Object(w.jsx)("div",{className:"flex-1",children:Object(w.jsx)(pe.a,{id:"from",value:s,onChange:function(e){return S(e,i)},styles:ve,theme:me,options:[v[0]]})})]}),Object(w.jsx)("div",{className:"my-4 text-primary flex justify-center",children:Object(w.jsx)(T.a,{className:"opacity-40 text-lg",icon:_.a})}),Object(w.jsxs)("div",{className:"rounded-2xl border border-depth-2 py-4 px-6 flex justify-between items-end",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"text-depth-1 uppercase text-sm mb-2",children:"To"}),Object(w.jsx)("input",{autoComplete:"off",placeholder:"0.0",className:"no-arrows font-mono outline-none text-md bg-depth-1",id:"from",type:"number"})]}),Object(w.jsx)("div",{className:"flex-1",children:Object(w.jsx)(pe.a,{id:"to",value:b,onChange:function(e){return S(e,p)},styles:ve,theme:me,options:[v[1],v[2]]})})]}),Object(w.jsxs)("div",{className:"p-2 text-sm uppercase text-primary text-right",children:["max liquidity ",k]}),Object(w.jsxs)("button",{disabled:!h,onClick:C,className:"my-4 w-full uppercase font-bold text-center bg-gradient-to-r from-primary to-secondary text-opposite rounded-md px-6 py-4 text-md shadow hover:text-default hover:disabled:text-opposite transition-color duration-150 ease-in disabled:opacity-20 disabled:cursor-not-allowed",children:["Swap ",Object(w.jsx)(T.a,{icon:_.c})]})]})})},ge=function(){var e=Object(r.useState)(!0),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),s=Object(l.a)(a,2),i=s[0],f=s[1],b=Object(r.useState)(null),p=Object(l.a)(b,2),h=p[0],j=p[1],m=Object(be.g)().id,v=Object(be.f)(),O=Object(ee.b)(),x=Object(ee.c)((function(e){return e.markets.markets.find((function(e){return e.id===parseInt(m)}))}));Object(r.useEffect)((function(){Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(de(m));case 2:t=new d.c("HWHvQhFmJB3NUcu1aihKmrKegfVxBEHzwVX6yZCKEsi1"),f(t),j(t),c(!1);case 6:case"end":return e.stop()}}),e)})))()}),[]);return Object(w.jsx)("div",{className:"flex justify-center items-center h-full",children:n?Object(w.jsx)(T.a,{className:"opacity-50 text-2xl",spin:!0,icon:_.d}):function(){if(x)return Object(w.jsx)(ye,{serumMarkets:[i,h],market:x});v.push("/404")}()})},we=function(){return Object(w.jsx)("div",{className:"text-2xl text-center",children:Object(w.jsxs)("p",{children:["Oops, ",Object(w.jsx)("span",{className:"font-bold text-primary",children:" 404 "})," Not Found"]})})},ke=function(){return Object(w.jsxs)(G,{initialTheme:"light",children:[Object(w.jsx)(X.a,{children:Object(w.jsxs)("div",{className:"min-h-screen flex flex-col",children:[Object(w.jsx)($,{}),Object(w.jsx)("main",{className:"flex-1 flex justify-center",children:Object(w.jsx)("div",{className:"container my-10 w-full",children:Object(w.jsxs)(be.c,{children:[Object(w.jsx)(be.a,{exact:!0,path:"/",component:fe}),Object(w.jsx)(be.a,{exact:!0,path:"/market/:id",component:ge}),Object(w.jsx)(be.a,{component:we})]})})})]})}),Object(w.jsx)(I.a,{})]})};var Ne=function(){return Object(w.jsx)(ke,{})},Ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,289)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))},Se=n(46),Ce=n(156),Me=n(157),Ke={markets:[],filters:[]};var Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(he.a)(Object(he.a)({},e),{},{markets:t.payload.markets,filters:t.payload.filters});case ae:return Object(he.a)(Object(he.a)({},e),{},{markets:t.payload?[].concat(Object(h.a)(e.markets.filter((function(e){return e.id!==t.payload.id}))),[t.payload]):e.markets});default:return e}},Ae=Object(Se.combineReducers)({markets:Ie}),Le=Object(Se.createStore)(Ae,Object(Ce.composeWithDevTools)(Object(Se.applyMiddleware)(Me.a)));s.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(ee.a,{store:Le,children:Object(w.jsx)(E,{children:Object(w.jsx)(R,{children:Object(w.jsx)(Ne,{})})})})}),document.getElementById("root")),Ee()}},[[288,1,2]]]);
//# sourceMappingURL=main.a906d220.chunk.js.map